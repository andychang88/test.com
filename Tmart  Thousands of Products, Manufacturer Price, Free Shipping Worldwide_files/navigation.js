(function(window,$){window.Tmart=window.Tmart||{};Tmart.Menu=Tmart.Menu||{};var initMenu=function(){var maxWidth=$('.navbar').width()- $('.more_menu_btn').width()- $('.wish_menu_btn').width()- $('.tmart-points-menu').width();var menuWidth=0;var lastMenuWidth=0;$('.nav_menu').each(function(index,element){menuWidth+=$(element).width();lastMenuWidth=$(element).width();if(menuWidth>maxWidth){$('.more_menu').append(element);}});if($('.more_menu > li').length>0){if(lastMenuWidth<=$('.more_menu_btn').width()&&$('.more_menu > li').length==1){$('.more_menu > li').first().insertBefore('.more_menu_btn');$('.more_menu_btn').css('display','none');}else{$('.more_menu_btn').css('display','');}}else{$('.more_menu_btn').css('display','none');}},popFromMoreMenu=function(){var width=$('.navbar').width();$('.navbar>div>ul>li').each(function(index,element){width-=$(element).width();});$('.more_menu>li').each(function(index,element){if($('.tmart-points-menu').length>0){width-=$(element).insertBefore('.tmart-points-menu').width();}
else{width-=$(element).insertBefore('.more_menu_btn').width();}
if(width<0){$('.more_menu').append(element);}});if($('.more_menu > li').length==1){$('.more_menu > li').first().insertBefore('.more_menu_btn');$('.more_menu_btn').css('display','none');}},pushToMoreMenu=function(){var width=$('.navbar').width()- $('.more_menu_btn').width()- $('.wish_menu_btn').width()- $('.tmart-points-menu').width();$('.navbar>div>ul>li').not('.more_menu_btn,.wish_menu_btn,.tmart-points-menu').each(function(index,element){if(width>0){width-=$(element).width();if(width<=0){$('.more_menu>li:first').before(element);}}});},recentWindowWidth=$(window).width();$(window).resize(function(){var currentWindowWidth=$(window).width();if(currentWindowWidth>recentWindowWidth){popFromMoreMenu();}
else if(currentWindowWidth<recentWindowWidth){initMenu();}
recentWindowWidth=currentWindowWidth;});$.extend(Tmart.Menu,{init:initMenu});})(window,jQuery);